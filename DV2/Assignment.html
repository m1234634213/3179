<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Australian International and Domestic Travel</title>
  <link rel="stylesheet" href="styler.css">
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <header>
    <h1>Australian International and Domestic Travel</h1>
    <div class="cloud cloud1">
      <img src="05cd33059a006bf49006097af4ccba98-plane-in-flight-by-vexels.png" alt="Plane" />
    </div>
  </header>

  <div id="sliderContainer">
    <label for="yearSlider"><strong>Select Year:</strong></label>
    <input type="range" id="yearSlider" min="2000" max="2025" step="1" value="2010">
    <span id="yearLabel">2010</span>
  </div>

  <main class="dashboard">
    <!-- Row 1 -->
    <div class="row">
      <div class="story-box">
       <h2>Global Flight Trends</h2> 
        <p>The global international routes map provides a broad view of how Australia connects with the rest of the
          world. Each route represents the flow of people, trade, and opportunity, together forming a web that
          highlights Australiaâ€™s strong position in global aviation. From major hubs such as Sydney, Melbourne, and
          Brisbane, flights stretch outward across Asia, North America, and Europe, reflecting both economic links and
          cultural relationships that have developed over time.<br><br>The densest routes tend to follow established
          corridors shaped by geography and history. Connections to nearby nations like New Zealand and Singapore remain
          among the most frequent, while long-haul services to cities such as Los Angeles, London, and Tokyo show the
          global reach of Australian travel demand. Qantas and Air New Zealand stand out as key operators within this
          network, consistently maintaining reliable, high-capacity routes that link Australia to major world
          destinations.</p>
      </div>
      <div class="chart-box">
        <!-- <h2>World Map</h2> -->
        <div id="mainChart" class="chart-container"></div>
      </div>
    </div>

    <!-- Row 2 -->
    <div class="row">
      <div class="story-box">
        <p>The story of Australian domestic air travel begins with the well-established giants of the sky.<br><br>Qantas
          and Virgin dominate the landscape, their long histories, trusted reputations, and extensive networks allowing
          them to serve the busiest routes with consistency and reliability. Smaller airlines like Skywest have
          struggled to survive in this competitive market, eventually disappearing as they failed to match the scale,
          pricing, or service quality of their larger rivals. <br><br>At the same time, newer entrants like Bonza are
          beginning to shake up the industry, offering innovative routes and fresh approaches to domestic travel. This
          dynamic highlights how the domestic aviation sector constantly balances the stability of legacy carriers with
          the disruptive energy of newcomers, reflecting broader trends in population growth, regional connectivity, and
          evolving traveler preferences.</p>
      </div>
      <div class="chart-box">
        <!-- <h2>Domestic Airlines</h2> -->
        <div id="domesticAirlines" class="chart-container"></div>
      </div>
    </div>

    <!-- Row 3 (full-width) -->
    <div class="row full-width">
      <div class="chart-box">
        <!-- <h2>Domestic Passenger Trends</h2> -->
        <div id="domestic" class="chart-container"></div>
      </div>
    </div>

    <!-- Row 4 -->
    <div class="row">
      <div class="story-box">
        <h2>International Routes</h2>
        <p>As we shift our focus to international travel, the patterns tell a story shaped by geography, history, and
          airline strategy. Qantas and Air New Zealand clearly dominate as preferred carriers, offering high-frequency
          flights and reliable connections for Australians heading overseas. Their success stems from decades of
          established infrastructure, trusted service, and strategic positioning in major hubs.<br><br>Yet competition
          remains, with airlines like Fiji Airways and Garuda occasionally challenging the incumbents through seasonal
          routes, competitive pricing, or niche services. This segment of aviation highlights the delicate balance
          between market dominance and opportunities for new or regional players, showing how international connectivity
          is shaped by both demand and airline strategy.</p>
      </div>
      <div class="chart-box">
        <!-- <h2>City International</h2> -->
        <div id="cityInt" class="chart-container"></div>
      </div>
    </div>

    <!-- Row 5 (full-width) -->
    <div class="row full-width">
      <div class="chart-box">
        <!-- <h2>Emissions Map</h2> -->
        <div id="emissionsMap" class="chart-container"></div>
      </div>
    </div>

    <!-- Row 6 (full-width) -->
    <div class="row full-width">
      <div class="chart-box">
        <!-- <h2>Gas Trends</h2> -->
        <div id="gas" class="chart-container"></div>
      </div>
    </div>

    <!-- Row 7 -->
    <div class="row">
      <div class="story-box">
        <h2>Global Trends</h2>
        <p>However, air travel does not come without consequences. The global emissions map reveals that developed
          countries are disproportionately responsible for aviation-related emissions, with Australia contributing
          significantly due to frequent long-haul flights.<br><br>The United States and China lead globally, reflecting
          both domestic travel intensity and their role as international hubs which is also seen in the Capital City Map. Interestingly, these high-emission
          regions closely align with the destinations most visited by Australians, underlining a direct link between
          travel demand and environmental impact.<br><br>These visualizations reminds us that the convenience of air
          travel carries a measurable ecological cost, highlighting the importance of sustainability measures in
          aviation planning and the design of airline and aircraft.</p>
      </div>
      <div class="chart-box">
        <!-- <h2>Week 9 Homework</h2> -->
        <div id="week9Homework" class="chart-container"></div>
      </div>
    </div>
    <div class="source-attribution">
    <p><strong>Source Attribution:</strong></p>
    <ul>
      <li><a href="https://openflights.org" target="_blank">OpenFlights</a> for Flight Logs and routes</li>
      <li><a href="https://codetap.org/project/3d-plane-fly-animation" target="_blank">CodeTap</a> for design Inspiration</li>
      <li><a href="https://www.kaggle.com/datasets/ahmedeltom/icao-aircraft-engine-emissions" target="_blank">Engine Emissions</a> by Ahmed Eltom</li>
      <li><a href="https://www.abs.gov.au/about/data-services/data-explorer" target="_blank">ABS</a> for Domestic Travel</li>
      <li>Created by Marc Cordeiro for FIT3179 Semester 2, 2025</li>
    </ul>
  </div>
  </main>

  <script>
    const charts = [
      { id: "mainChart", file: "world_map.vg.json" },
      { id: "domesticAirlines", file: "domestic_airlines.vg.json" },
      { id: "domestic", file: "Domestic.vg.json" },
      { id: "emissionsMap", file: "Emissions_map.vg.json" },
      { id: "cityInt", file: "city_int.vg.json" },
      { id: "gas", file: "gas.vg.json" },
      { id: "week9Homework", file: "week_9_homework.vg.json" }
    ];

    const chartViews = {};
    const yearSlider = document.getElementById("yearSlider");
    const yearLabel = document.getElementById("yearLabel");

    function updateCharts(year) {
      yearLabel.textContent = year;
      Object.values(chartViews).forEach(view => {
        if (view.signalNames().includes("selectedYear")) view.signal("selectedYear", year).run();
      });
    }

    function embedChart(chart) {
      fetch(chart.file)
        .then(r => r.json())
        .then(spec => {
          spec.autosize = { type:"fit", contains:"padding" };
          if (!["mainChart","week9Homework"].includes(chart.id)) {
            spec.params = spec.params || [];
            spec.params.push({ name:"selectedYear", value:parseInt(yearSlider.value), bind:false });
          }
          vegaEmbed('#'+chart.id, spec, { actions:false, renderer:"canvas" })
            .then(res => {
              chartViews[chart.id] = res.view;
              res.view.resize();
            })
            .catch(err => console.error(err));
        })
        .catch(err => console.error(err));
    }

    charts.forEach(embedChart);
    yearSlider.addEventListener("input", e => updateCharts(parseInt(e.target.value)));

    // Rotating globes
    ["mainChart","week9Homework"].forEach(id => {
      vegaEmbed('#'+id, id==="mainChart"?"world_map.vg.json":"week_9_homework.vg.json", { actions:false })
        .then(res => {
          let view = res.view, angle=0;
          setInterval(() => {
            angle += id==="mainChart"?0.6:0.2;
            view.signal(id==="mainChart"?"rotLon":"rotate0", angle).run();
          }, 50);
        });
    });

    // Resize charts on window resize
    window.addEventListener("resize", () => { Object.values(chartViews).forEach(view => view.resize()); });
  </script>
</body>
</html>
