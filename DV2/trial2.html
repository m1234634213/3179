<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Visualisation 2</title>
  <link rel="stylesheet" href="trial.css">
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>

<body>
  <header>
    <h1>Data Visualisation 2</h1>
    <div class="cloud cloud1">
      <div class="light"></div>
      <img src="05cd33059a006bf49006097af4ccba98-plane-in-flight-by-vexels.png" alt="Plane" />
    </div>
  </header>

  <!-- Global year slider -->
  <div id="sliderContainer">
    <label for="yearSlider"><strong>Select Year:</strong></label>
    <input type="range" id="yearSlider" min="2000" max="2025" step="1" value="2010">
    <span id="yearLabel">2010</span>
  </div>

  <main class="dashboard">

    <!-- Row 1 -->
    <div class="row">
      <div class="story-box">
        <h2>Global Flight Trends</h2>
        <p>The global international routes map provides a broad view of how Australia connects with the rest of the world. Each route represents the flow of people, trade, and opportunity, together forming a web that highlights Australia’s strong position in global aviation. From major hubs such as Sydney, Melbourne, and Brisbane, flights stretch outward across Asia, North America, and Europe, reflecting both economic links and cultural relationships that have developed over time.<br><br>The densest routes tend to follow established corridors shaped by geography and history. Connections to nearby nations like New Zealand and Singapore remain among the most frequent, while long-haul services to cities such as Los Angeles, London, and Tokyo show the global reach of Australian travel demand. Qantas and Air New Zealand stand out as key operators within this network, consistently maintaining reliable, high-capacity routes that link Australia to major world destinations.</p>
      </div>
      <div class="chart-box">
        <div id="mainChart"></div>
      </div>
    </div>

    <!-- Row 2 -->
    <div class="row">
      <div class="chart-box">
        <h2>Domestic Airlines</h2>
        <div id="domesticAirlines"></div>
      </div>
      <div class="story-box">
        <p>The story of Australian domestic air travel begins with the well-established giants of the sky.<br><br>Qantas and Virgin dominate the landscape, their long histories, trusted reputations, and extensive networks allowing them to serve the busiest routes with consistency and reliability. Smaller airlines like Skywest have struggled to survive in this competitive market, eventually disappearing as they failed to match the scale, pricing, or service quality of their larger rivals. <br><br>At the same time, newer entrants like Bonza are beginning to shake up the industry, offering innovative routes and fresh approaches to domestic travel. This dynamic highlights how the domestic aviation sector constantly balances the stability of legacy carriers with the disruptive energy of newcomers, reflecting broader trends in population growth, regional connectivity, and evolving traveler preferences.</p>
      </div>
    </div>

    <!-- Row 3 (Full width) -->
    <div class="row full-width">
      <div class="chart-box">
        <h2>Domestic Passenger Trends</h2>
        <div id="domestic"></div>
      </div>
    </div>

    <!-- Row 4 -->
    <div class="row">
      <div class="story-box">
        <h2>International Routes</h2>
        <p>As we shift our focus to international travel, the patterns tell a story shaped by geography, history, and airline strategy. Qantas and Air New Zealand clearly dominate as preferred carriers, offering high-frequency flights and reliable connections for Australians heading overseas. Their success stems from decades of established infrastructure, trusted service, and strategic positioning in major hubs.<br><br>Yet competition remains, with airlines like Fiji Airways and Garuda occasionally challenging the incumbents through seasonal routes, competitive pricing, or niche services. This segment of aviation highlights the delicate balance between market dominance and opportunities for new or regional players, showing how international connectivity is shaped by both demand and airline strategy.</p>
      </div>
      <div class="chart-box">
        <div id="cityInt"></div>
      </div>
    </div>

    <!-- Row 5 -->
    <div class="row">
      <div class="chart-box">
        <h2>Emissions Map</h2>
        <div id="emissionsMap"></div>
      </div>
      <div class="story-box">
        <p>However, air travel does not come without consequences. The global emissions map reveals that developed countries are disproportionately responsible for aviation-related emissions, with Australia contributing significantly due to frequent long-haul flights.<br><br>The United States and China lead globally, reflecting both domestic travel intensity and their role as international hubs. Interestingly, these high-emission regions closely align with the destinations most visited by Australians, underlining a direct link between travel demand and environmental impact.<br><br>This visualization reminds us that the convenience of air travel carries a measurable ecological cost, highlighting the importance of sustainability measures in aviation planning.</p>
      </div>
    </div>

    <!-- Row 6 (Full width) -->
    <div class="row full-width">
      <div class="chart-box">
        <h2>Gas Trends</h2>
        <div id="gas"></div>
      </div>
    </div>

    <!-- Row 7 -->
    <div class="row">
      <div class="story-box">
        <h2>Global Trends</h2>
        <p>Finally, looking at airport traffic patterns provides a tangible sense of how Australia’s air network functions. Capital cities reveal predictable patterns of high, medium, and low traffic, while certain airports emerge as key stopover and transit points, acting as hubs for regional connectivity. Observing these patterns makes it clear that a small number of airports carry a disproportionately large share of the country’s passenger flow, shaping airline strategies, influencing infrastructure development, and highlighting the critical nodes that keep the entire network running efficiently.</p>
      </div>
      <div class="chart-box">
        <div id="week9Homework" class="rotating-globe"></div>
      </div>
    </div>

  </main>

  <script>
    const charts = [
      { id: "mainChart", file: "world_map.vg.json" },
      { id: "domesticAirlines", file: "domestic_airlines.vg.json" },
      { id: "domestic", file: "Domestic.vg.json" },
      { id: "emissionsMap", file: "Emissions_map.vg.json" },
      { id: "cityInt", file: "city_int.vg.json" },
      { id: "gas", file: "gas.vg.json" },
      { id: "week9Homework", file: "week_9_homework.vg.json" },
    ];

    let chartViews = {};
    const yearSlider = document.getElementById("yearSlider");
    const yearLabel = document.getElementById("yearLabel");

    function updateCharts(year) {
      yearLabel.textContent = year;
      Object.values(chartViews).forEach(view => {
        view.signal("selectedYear", year).run();
      });
    }

    charts.forEach(chart => {
      fetch(chart.file)
        .then(r => r.json())
        .then(spec => {
          spec.params = spec.params || [];
          spec.params.push({ name: "selectedYear", value: parseInt(yearSlider.value), bind: false });
          vegaEmbed('#' + chart.id, spec, { actions: false }).then(res => {
            chartViews[chart.id] = res.view;
          });
        });
    });

    yearSlider.addEventListener("input", e => updateCharts(parseInt(e.target.value)));

    let globeView;
    vegaEmbed('#week9Homework', 'week_9_homework.vg.json', { actions: false })
      .then(res => {
        globeView = res.view;
        let angle = 0;
        const rotationSpeed = 0.2;
        setInterval(() => {
          angle += rotationSpeed;
          globeView.signal("rotate0", angle).run();
        }, 50);
      });

    charts.forEach(chart => {
      chart.addEventListener('click', () => {
        const isFull = chart.classList.contains('fullscreen');
        if (isFull) {
          chart.classList.remove('fullscreen');
          document.body.classList.remove('fullscreen-active');
        } else {
          chart.classList.add('fullscreen');
          document.body.classList.add('fullscreen-active');
        }
      });
    });

  </script>
</body>

</html>